all:
  children:
    raspberries:
      vars:
        ansible_connection: ssh
        ansible_user: pi
        ansible_ssh_pass: raspberry
        ansible_python_interpreter: /usr/bin/python3
      children:
        ext_disk:
          vars:
            ext_disk_device: '/dev/sda'
          children:
            docker_host:
              hosts:
                epic-docker-host:
                  hostname: "britney-spears"
                  ansible_host: "{{ hostname }}.local"
                  raw_hostname: '0x52e884f2'
    
    container:
      vars:
        ansible_connection: docker                                       
        remote_tmp: /tmp/.ansible
        ansible_user: root 
        # ansible_python_interpreter: /usr/bin/python3
        image: balenalib/raspberrypi4-64-debian-python
        docker_host: epic-docker-host
        docker_api: "tcp://{{ hostvars[docker_host].ansible_host }}:2375"
        ansible_docker_extra_args: "-H={{ docker_api }}"
        docker_keep_volumes: true # do not delete home directories when deleting container
      hosts:
        epic-backup:
