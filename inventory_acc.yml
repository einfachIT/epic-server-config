all:
  children:
    raspberries:
      vars:
        ansible_connection: ssh
        ansible_user: pi
        ansible_ssh_pass: raspberry
        ansible_python_interpreter: /usr/bin/python3
      children:
        epicraspberries:
          hosts:
            epic-tim:
              hostname: tim-thaler
              raw_hostname: '0xb2af4b33'
              ansible_host: "{{ hostname }}.local"
            epic-peter:
              hostname: peter-pan
              raw_hostname: '0xf0364264'
              ansible_host: "{{ hostname }}.local"
        ext_disk:
          vars:
            ext_disk_device: '/dev/sda'
            # ext_disk_device: '/dev/loop0'
          children:
            docker_host:
              hosts:
                epic-docker-host:
                  hostname: "britney-spears"
                  raw_hostname: '0x52e884f2'
                  ansible_host: "{{ hostname }}.local"
    
    container:
      vars:
        ansible_connection: docker                                       
        remote_tmp: /tmp/.ansible
        ansible_user: root 
        # ansible_python_interpreter: /usr/bin/python3
        image: balenalib/raspberrypi4-64-debian-python
        docker_host: epic-docker-host
        docker_api: "tcp://{{ hostvars[docker_host].ansible_host }}:2375"
        ansible_docker_extra_args: "-H={{ docker_api }}"
        docker_keep_volumes: true # do not delete home directories when deleting container
      children:
        epic_backup:
          hosts:
            epic-backup:
